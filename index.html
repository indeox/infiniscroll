<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="chrome=1"> <!-- Enable Chrome Frame -->
    <!-- CSS -->
    <link rel="stylesheet" href="https://ton.twimg.com/tweetdeck-web/web/css/font.5ef884f9f9.css">
    <link rel="stylesheet" href="https://ton.twimg.com/tweetdeck-web/web/css/app-dark.cb7ed85902.css" title="dark">
    <link rel="stylesheet" href="https://ton.twimg.com/tweetdeck-web/web/css/app-light.c10246f0ff.css" title="light">
    <!-- Icons -->
    <meta charset="UTF-8" />

    <style>
      body {
        background: #1c6399
      }

      .column {
        width: 270px;
        max-height: 100%;
        font-size: 11px;
        float: left;
        overflow: auto;
      }

      .column__body {
        max-height: 100%;
        overflow: auto;
      }

      .column__header button {
        margin: 4px;
        border: 1px solid #ccc !important;
        background: transparent;
        color: #ffffff;
      }

    </style>

    <script src="https://code.jquery.com/jquery-2.2.4.js"></script>
    <script src="src/sample_content.js" charset="utf-8"></script>
    <!-- <script src="main.es6.js" charset="utf-8"></script> -->
    <script src="render.js" charset="utf-8"></script>
  </head>
  <body>

    <div class="column viewport">
      <div class="container">
        <div class="slice"></div>
      </div>
    </div>

    <script>
        var content = Array.from({ length: 100 }).map(function(item, i) {
          var item = sampleContent[
            Math.floor(Math.random() * sampleContent.length)
          ];
          var elToInsert = document.createElement('div');
          elToInsert.innerHTML = item.html;
          elToInsert = elToInsert.firstChild;

          return {
            id: i,
            node: elToInsert
          }
        });

        var column = document.querySelector('.column');

        column.addEventListener('scroll', function () {
          go();
        }, true);

        var lastOutput = {};
        function go() {
          lastOutput = render(lastOutput, {
            $target: column,
            content: content,
            offset: -column.scrollTop
          })
        }

        function pause() {
          clearInterval(i);
        }

        go();

        function shuffle(array) {
          for (var i = array.length - 1; i > 0; i--) {
            var j = Math.floor(Math.random() * (i + 1));
            var temp = array[i];
            array[i] = array[j];
            array[j] = temp;
          }
          return array;
        }

        function reorder() {
          shuffle(content); // mutation, eeeeek
          go()
        }
    </script>
  </body>
</html>
